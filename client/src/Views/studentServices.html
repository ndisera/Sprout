<div ng-include="'html/studentTabs.html'"></div>
<div id="student-services-wrapper" class="voffset4">
    <div class="row voffset3" ng-repeat="service in services">
        <div class="col-xs-12">
            <div class="panel-wrapper student-services-panel" ng-class="{ 'fulfilled': service.fulfilled, }">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="table-container">
                                <div class="table-cell">
                                    <span class="glyphicon glyphicon-ok-sign glyphicon-big-button" ng-if="service.fulfilled" ng-click="markFulfilled(service, false)"></span>
                                    <span class="glyphicon glyphicon-remove-sign glyphicon-big-button" ng-if="!service.fulfilled" ng-click="markFulfilled(service, true)"></span>
                                </div>
                                <div class="table-cell full-width">
                                    <form class="form-horizontal" name="editServiceForm{{$index}}" ng-submit="saveService(service)">
                                        <div class="form-group">
                                            <label class="control-label col-sm-2">Title: </label>
                                            <div class="col-sm-10">
                                                <div ng-if="!service.editing">
                                                    <span class="form-control-static">{{ service.title }}</span>
                                                </div>
                                                <div class="student-services-input" ng-if="service.editing">
                                                    <input type="text" class="form-control" name="editServiceFormInput{{$index}}" ng-model="service.title_temp" placeholder="Service Requirement Title">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-sm-2">Description: </label>
                                            <div class="col-sm-10">
                                                <div ng-if="!service.editing">
                                                    <span class="form-control-static">{{ service.description }}</span>
                                                </div>
                                                <div class="student-services-input" ng-if="service.editing">
                                                    <input type="text" class="form-control" name="editServiceFormInput{{$index}}" ng-model="service.description_temp" placeholder="Service Requirement Description">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-sm-2">Fulfilled: </label>
                                            <div class="col-sm-10">
                                                <div ng-show="service.fulfilled && !service.editing">
                                                    <span class="form-control-static" ng-if="service.fulfilled_description !== null">{{ service.fulfilled_description }}</span>
                                                    <span class="form-control-static student-services-red" ng-if="service.fulfilled_description === null">No Description Provided</span>
                                                </div>
                                                <div class="student-services-input" ng-show="!service.fulfilled || service.editing">
                                                    <input type="text" class="form-control" name="editServiceFormInput{{$index}}" ng-model="service.fulfilled_description_temp" placeholder="How is this service requirement fulfilled?">
                                                </div>
                                            </div>
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <span ng-if="!service.editing && service.fulfilled">
                                                    Marked fulfilled 
                                                    <span ng-if="service.teacher.first_name !== null && service.teacher.last_name !== null">
                                                        by {{ service.teacher.first_name }} {{ service.teacher.last_name }}
                                                    </span>
                                                    <span ng-if="service.fulfilled_date !== null">
                                                        on {{ service.fulfilled_date }}
                                                    </span>
                                                </span>
                                                <span ng-if="service.editing && service.fulfilled">
                                                    &nbsp
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group no-bottom-margin">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <div ng-if="service.editing">
                                                    <button class="btn btn-success" type="submit" ng-disabled="editServiceForm{{$index}}.$invalid">
                                                        <span>Save</span>
                                                    </button>
                                                    <button class="btn btn-danger" ng-click="toggleEditService(service)">
                                                        <span>Cancel</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="btn-manipulate-row">
                            <button class="btn btn-primary" ng-if="!service.editing" ng-click="toggleEditService(service)">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </button>
                            <button class="btn btn-danger" ng-if="service.editing" ng-click="deleteService(service)">
                                <span class="glyphicon glyphicon-trash"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="btn-manipulate-row-bottom" ng-if="!adding">
        <button class="btn btn-success btn-manipulate" type="button" data-toggle="tooltip" title="Add Service" ng-click="toggleAdd(true)">
            <span class="glyphicon glyphicon-plus"></span>
        </button>
    </div>
    <div class="row voffset3" ng-if="adding">
        <div class="col-xs-12">
            <div class="panel-wrapper student-services-add">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Add Service Requirement</h4>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal" name="addServiceForm" ng-submit="addService()">
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">Title: </label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" name="addServiceTitle" ng-model="newService.title" placeholder="Service Requirement Title" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">Description: </label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" name="addServiceDescription" ng-model="newService.description" placeholder="Service Requirement Description" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">Fulfilled: </label>
                                        <div class="col-sm-10 student-services-checkbox">
                                            <input type="checkbox" ng-model="newService.fulfilled" ng-true-value="'Yes'" ng-false-value="'No'">
                                            <span>{{ newService.fulfilled }}</span>
                                        </div>
                                        <div class="col-sm-2 hidden-xs">
                                        </div>
                                        <div class="col-sm-10 voffset3" ng-if="newService.fulfilled === 'Yes'">
                                            <input type="text" class="form-control" name="addStudentFulfilledDescription" ng-model="newService.fulfilled_description" placeholder="How is this service requirement fulfilled?">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-offset-2 col-sm-10">
                                            <button class="btn btn-success" type="submit" ng-disabled="addServiceForm.$invalid">
                                                <span>Add</span>
                                            </button>
                                            <button class="btn btn-danger" ng-click="toggleAdd()">
                                                <span>Cancel</span>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-include="'html/bottomSpacer.html'"></div>
