<div ng-include="'html/studentTabs.html'"></div>
<div ng-if="sections.length > 0" class="row">
    <div class="col-xs-12">
        <button ng-click="openReportForm()" class="btn btn-primary pull-right focus-top-button" type="button">Generate Report</button>
    </div>
</div>
<div class="modal fade" id="generateReportModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header grey modal-wrapper">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Create Behavior and Effort Report for {{ student.first_name }} {{ student.last_name }}</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" name="reportForm" ng-submit="generateReport()">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="reportClass">Class:</label>
                        <div class="col-sm-10">
                            <select required ng-model="report.class" ng-options="x for x in classOptions" id="reportClass" name="reportClass" class="form-control"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="reportStartDate">From:</label>
                        <div class="col-sm-10">
                            <input required autocomplete="off" type="text" date-time class="form-control" id="reportStartDate" name="reportStartDate" ng-model="report.startDate" view="date" min-view="date" format="YYYY-MM-DD">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="reportEndDate">To:</label>
                        <div class="col-sm-10">
                            <input required autocomplete="off" type="text" date-time class="form-control" id="reportEndDate" name="reportEndDate" ng-model="report.endDate" view="date" min-view="date" format="YYYY-MM-DD">
                        </div>
                    </div>
                </form>
                <div class="voffset4">
                </div>
                <div class="btn-manipulate-row">
                    <button ng-disabled="reportForm.$invalid" class="btn btn-success" ng-click="generateReport()">
                        <span class="glyphicon glyphicon-ok"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="sections.length === 0">
    <div class="row">
        <div class="col-xs-12">
            <div class="alert alert-info no-bottom-margin" role="alert">
                <span><b>Tip:</b> It looks like this student isn't enrolled in any classes. Speak to an admin to add a class to this student's schedule.</span>
            </div>
        </div>
    </div>
</div>
<div ng-if="sections.length > 0">
    <div class="row voffset3">
        <div class="col-xs-12 col-sm-6">
            <div class="input-group">
                <span class="input-group-addon">From</span>
                <input type="text" id="graphStartDate" class="form-control" date-time ng-model="graphStartDate" view="date" min-view="date" format="YYYY-MM-DD" date-change="graphDateRangeChange" max-date="graphEndDate" watch-direct-changes="true">
            </div>
        </div>
        <div class="col-xs-12 col-sm-6 student-mobile-spacer">
            <div class="input-group">
                <span class="input-group-addon">To</span>
                <input type="text" id="graphEndDate" class="form-control" date-time ng-model="graphEndDate" view="date" min-view="date" format="YYYY-MM-DD" date-change="graphDateRangeChange" min-date="graphStartDate" watch-direct-changes="true">
            </div>
        </div>
    </div>
    <div class="row voffset4">
        <div class="col-lg-6">
            <div class="panel-wrapper">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Behavior</h3>
                    </div>
                    <div class="panel-body">
                        <div class="student-behaviors-graph">
                            <canvas id="student_behavior" class="chart chart-line" chart-data="behaviorGraph.data" chart-labels="sharedGraph.labels" chart-series="sharedGraph.series" chart-options="behaviorGraph.options" chart-dataset-override="sharedGraph.datasetOverride" chart-click="onClick">
                            </canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel-wrapper">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Effort</h3>
                    </div>
                    <div class="panel-body">
                        <div class="student-behaviors-graph">
                            <canvas id="student_effort" class="chart chart-line" chart-data="effortGraph.data" chart-labels="sharedGraph.labels" chart-series="sharedGraph.series" chart-options="effortGraph.options" chart-click="onClick">
                            </canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row voffset3">
        <div class="col-xs-12">
            <div class="panel-wrapper">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Input Behavior Scores</h3>
                    </div>
                    <div class="panel-body">
                        <div class="input-group">
                            <span class="input-group-addon">For Date</span>
                            <input type="text" id="inputDate" class="form-control" date-time ng-model="inputDate" view="date" min-view="date" format="YYYY-MM-DD" date-change="inputDateChange" watch-direct-changes="true">
                        </div>
                        <div class="voffset3">
                            <div class="alert alert-info no-bottom-margin" ng-if="scoresInput.length === 0">
                                <span><b>Info:</b> It looks like this student isn't enrolled in any classes for this date.</span>
                            </div>
                            <!--<div class="student-behaviors-no-input-classes" ng-show="scoresInput.length === 0">-->
                            <!--<h4 class="centerText">No Enrolled Classes</h4>-->
                            <!--</div>-->
                            <table class="table table-responsive" ng-if="scoresInput.length !== 0">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Behavior</th>
                                        <th>Effort</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="entry in scoresInput">
                                        <td>{{ entry.title }}</td>
                                        <td>
                                            <select ng-model="entry.curBehavior" ng-options="x.value as x.display for x in inputOptions" ng-change="saveScore(entry, 'behavior')"></select>
                                        </td>
                                        <td>
                                            <select ng-model="entry.curEffort" ng-options="x.value as x.display for x in inputOptions" ng-change="saveScore(entry, 'effort')"></select>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-include="'html/bottomSpacer.html'"></div>
