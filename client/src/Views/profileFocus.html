<div ng-include="'html/profileTabs.html'"></div>
<div class="row">
    <div class="col-xs-12">
        <h3 class="inlineHeading">Focus Students</h3>
        <button ng-if="!editing" ng-click="toggleEdit()" class="btn btn-primary pull-right focus-top-button" type="button">Choose Students</button>
        <button ng-if="editing" ng-click="toggleEdit()" class="btn btn-danger pull-right focus-top-button" type="button">Stop</button>
    </div>
</div>
<hr>
<div class="row" ng-if="focusStudents.length === 0 && !editing">
    <div class="col-xs-12">
        <div class="alert alert-info no-bottom-margin" role="alert">
            <span><b>Tip:</b> It looks like you don't have any Focus Students. Click the "Choose Students" button to select one.</span>
        </div>
    </div>
</div>
<div class="sortable voffset3" ui-sortable="sortableOptions" ng-model="focusStudents">
    <div class="row focus-student-row" ng-repeat="focusStudent in focusStudents" ng-class="{ 'not-sortable': !editing, }">
        <div class="col-xs-12">
            <div class="focus-remove-button" ng-if="editing">
                <button ng-click="removeFocusStudent(focusStudent)" class="btn btn-danger" type="button">
                    <span class="glyphicon glyphicon-minus white"></span>
                </button>
            </div>
            <div ng-class="{ 'focus-student-panel-editing': editing, }">
                <div class="panel-wrapper">
                    <div class="panel panel-default">
                        <div class="panel-heading panel-heading-link" ng-click="editing ? noop() : location.path('/student/' + focusStudent.student)">
                            <h4 class="panel-title big">
                                {{ studentsLookup[focusStudent.student].first_name }} {{ studentsLookup[focusStudent.student].last_name }}
                            </h4>
                        </div>
                        <div id="collapse-{{ $index }}" class="panel-collapse collapse" ng-class="{ 'in': !editing, }">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-sm-4 centerText">
                                        <label>Focus Category</label>
                                        <span class="glyphicon glyphicon-heart-empty"></span>
                                        <div class="col-sm-12 focusGraph">
                                            <canvas id="focus_graph" class="chart chart-line" chart-data="focus_data" chart-labels="focus_labels" chart-options="options" chart-click="onClick"></canvas>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 centerText">
                                        <label>Progress Category</label>
                                        <span class="glyphicon glyphicon-fire"></span>
                                        <div class="col-sm-12 focusProgress">
                                            <canvas id="focus_progress_graph" class="chart chart-line" chart-data="progress_data" chart-labels="progress_labels" chart-colors="progress_colours" chart-options="options_behavior" chart-click="onClick"></canvas>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 centerText">
                                        <label>Caution Category</label>
                                        <span class="glyphicon glyphicon-alert"></span>
                                        <div class="col-sm-12 focusCaution">
                                            <canvas id="focus_caution_graph" class="chart chart-line" chart-data="caution_data" chart-labels="caution_labels" chart-colors="caution_colours" chart-options="options" chart-click="onClick"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" ng-if="editing && focusStudents.length < 5">
    <div class="col-xs-12">
        <div class="panel panel-default panel-add pointer" ng-show="!adding" ng-click="toggleAdd(true)">
            <div class="panel-heading">
                <h4 class="panel-title centerText">
                    <span class="glyphicon glyphicon-plus blackish"></span>
                </h4>
            </div>
        </div>
        <div class="panel-wrapper" ng-show="adding">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Add Student</h4>
                    <button type="button" class="btn btn-danger panel-header-btn pull-right" ng-click="toggleAdd(false)">Cancel</button>
                </div>
                <div class="panel-body">
                    <h4 class="centerText" ng-show="students.length === focusStudents.length">No Other Students</h4>
                    <div ng-show="students.length !== focusStudents.length">
                        <input type="text" autocomplete="off" class="form-control" placeholder="Filter Students" name="studentSearch" list="studentSearch" ng-model="studentSearch.text">
                        <div class="table-responsive scrollableTableDiv table-add voffset3">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Student ID</th>
                                        <th>Birthday</th>
                                        <th class="buttonColumn"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="student in students | filter:studentFilter as filterResults" ng-click="addStudent(student)">
                                        <td>{{ student.first_name }}</td>
                                        <td>{{ student.last_name }}</td>
                                        <td>{{ student.student_id }}</td>
                                        <td>{{ student.birthdate }}</td>
                                        <td>
                                            <button class="btn btn-success btn-xs" type="button">
                                                <span class="glyphicon glyphicon-plus"></span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" ng-if="editing">
    <div class="col-xs-12">
        <div class="alert alert-info">
            <span><b>Tip:</b> You can reorder your focus students by dragging and dropping.</span>
        </div>
    </div>
</div>
<div ng-include="'html/bottomSpacer.html'"></div>
